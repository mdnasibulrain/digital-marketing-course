<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Admin Panel</title>

<style>
body{font-family:Arial;background:#eef2f7;padding:30px}
table{width:100%;border-collapse:collapse}
th,td{border:1px solid #ccc;padding:10px;text-align:center}
button{padding:5px 10px;border:none;border-radius:5px;background:#2563eb;color:white;cursor:pointer}
button:hover{background:#1e40af}
</style>
</head>

<body>

<h2>Admin Panel</h2>

<table>
<thead>
<tr>
<th>Email</th>
<th>Txn</th>
<th>Paid</th>
<th>Method</th>
<th>Status</th>
<th>Action</th>
</tr>
</thead>

<tbody id="tbody"></tbody>
</table>

<script>
const BASE="https://digital-marketing-course.onrender.com";

async function loadTransactions(){

const res=await fetch(BASE+"/transactions.json");
const data=await res.json();

const tbody=document.getElementById("tbody");
tbody.innerHTML="";

data.forEach(tx=>{
const tr=document.createElement("tr");

tr.innerHTML=`
<td>${tx.email}</td>
<td>${tx.txn}</td>
<td>${tx.paidAmount}</td>
<td>${tx.method}</td>
<td>${tx.status}</td>
<td>
${tx.status==="pending"
? `<button onclick="verify('${tx.txn}')">Verify</button>`
: "âœ”"}
</td>
`;

tbody.appendChild(tr);
});
}

async function verify(txn){

await fetch(BASE+"/verify-payment",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({txn})
});

loadTransactions();
}

loadTransactions();
</script>

</body>
</html>
