<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Digital Marketing Course</title>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<style>

@import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600;700&display=swap');

*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:'Poppins',sans-serif;
}

body{
background:
radial-gradient(circle at 20% 20%, #1e3a8a, transparent),
radial-gradient(circle at 80% 80%, #2563eb, transparent),
#020617;
color:white;
min-height:100vh;
display:flex;
align-items:center;
justify-content:center;
}
.hero{
text-align:center;
padding:80px 20px;
background:#000;
color:white;
}

.hero h1{
font-size:42px;
color:#facc15;
}

.hero p{
margin:15px 0;
color:#ddd;
font-size:18px;
}

.badges span{
display:inline-block;
margin:8px;
background:#111;
padding:8px 14px;
border-radius:8px;
border:1px solid #333;
}

.cta{
margin-top:20px;
padding:16px 35px;
font-size:18px;
background:#facc15;
color:black;
border:none;
border-radius:10px;
cursor:pointer;
font-weight:bold;
box-shadow:0 0 20px #facc15;
}

.countdown{
margin-top:20px;
font-size:20px;
color:#facc15;
font-weight:bold;
}

.stock{
margin-top:10px;
color:#f87171;
font-weight:bold;
}

.trust{
display:flex;
justify-content:center;
gap:30px;
padding:25px;
background:#111;
color:#fff;
flex-wrap:wrap;
}

.features{
padding:70px 20px;
text-align:center;
background:#020617;
color:white;
}

.features h2{
color:#facc15;
margin-bottom:40px;
}

.grid{
display:grid;
grid-template-columns:repeat(auto-fit,minmax(200px,1fr));
gap:20px;
max-width:900px;
margin:auto;
}

.boxf{
background:#111;
padding:25px;
border-radius:14px;
border:1px solid #222;
transition:.3s;
}

.boxf:hover{
transform:translateY(-6px);
border-color:#facc15;
}

.testimonials{
padding:70px 20px;
text-align:center;
background:black;
color:white;
}

.slider{
max-width:600px;
margin:auto;
overflow:hidden;
}

.slide{
padding:20px;
font-size:20px;
display:none;
}

.guarantee{
padding:70px 20px;
text-align:center;
background:#020617;
color:white;
}

.guarantee h2{
color:#facc15;
}

.scarcity{
position:fixed;
bottom:0;
left:0;
width:100%;
background:#facc15;
color:black;
text-align:center;
padding:12px;
font-weight:bold;
z-index:999;
}

.popup{
position:fixed;
bottom:70px;
left:20px;
background:#111;
color:white;
padding:15px 20px;
border-radius:10px;
display:none;
border:1px solid #333;
box-shadow:0 0 20px rgba(0,0,0,.5);
}
  
.wrapper{
width:100%;
padding:20px;
}

.card{
background:rgba(255,255,255,0.05);
border:1px solid rgba(255,255,255,0.1);
backdrop-filter:blur(18px);
border-radius:25px;
padding:35px;
max-width:420px;
margin:auto;
text-align:center;
box-shadow:
0 0 40px rgba(37,99,235,.3),
0 0 80px rgba(37,99,235,.2);
animation:fade 0.7s ease;
}

@keyframes fade{
from{opacity:0; transform:translateY(20px)}
to{opacity:1; transform:translateY(0)}
}

.title{
font-size:26px;
font-weight:700;
margin-bottom:10px;
color:#60a5fa;
}

.price{
font-size:34px;
font-weight:700;
color:#22c55e;
margin-bottom:25px;
}

button{
border:none;
padding:14px 26px;
border-radius:12px;
font-weight:600;
cursor:pointer;
transition:.3s;
}

.buybtn{
background:linear-gradient(135deg,#2563eb,#1d4ed8);
color:white;
box-shadow:0 0 20px #2563eb;
}

.buybtn:hover{
transform:translateY(-3px);
box-shadow:0 0 30px #2563eb;
}

.submitbtn{
background:linear-gradient(135deg,#22c55e,#16a34a);
color:white;
margin-top:15px;
box-shadow:0 0 15px #22c55e;
}

.submitbtn:hover{
transform:scale(1.05);
}

.box{
display:none;
margin-top:25px;
animation:fade 0.5s ease;
}

.label{
display:block;
margin-bottom:10px;
color:#cbd5f5;
font-size:14px;
}

select,input{
width:100%;
padding:12px;
margin-top:12px;
border-radius:10px;
border:1px solid rgba(255,255,255,0.2);
background:rgba(255,255,255,0.05);
color:white;
outline:none;
}

select:focus,input:focus{
border-color:#60a5fa;
box-shadow:0 0 10px #2563eb;
}

#qrcode{
margin-top:18px;
}

.paytext{
margin-top:12px;
color:#93c5fd;
font-size:14px;
}

.waitbox{
background:rgba(251,191,36,0.1);
border:1px solid #facc15;
color:#fde68a;
padding:15px;
border-radius:12px;
}

.successbox{
background:rgba(34,197,94,0.1);
border:1px solid #22c55e;
padding:20px;
border-radius:15px;
}

.link a{
display:block;
margin-top:12px;
padding:13px;
border-radius:12px;
text-decoration:none;
color:white;
font-weight:600;
background:linear-gradient(135deg,#2563eb,#1e40af);
transition:.3s;
}

.link a:hover{
transform:scale(1.05);
box-shadow:0 0 20px #2563eb;
}

</style>
  
</head>

<body>

<div class="wrapper">

  <!-- HERO SECTION -->
<section class="hero">
<h1>Master Digital Marketing in 7 Days</h1>
<p>Learn SEO ‚Ä¢ Ads ‚Ä¢ Affiliate ‚Ä¢ Sales Funnels ‚Ä¢ Automation</p>

<div class="badges">
<span>‚úî Lifetime Access</span>
<span>‚úî Instant Download</span>
<span>‚úî Beginner Friendly</span>
</div>

<div class="countdown" id="countdown"></div>

<button onclick="start()" class="cta">Get Instant Access ‚Äî NPR 299</button>

<div class="stock" id="stock"></div>
</section>


<!-- TRUST BAR -->
<section class="trust">
<div>‚≠ê 4.9 Rating</div>
<div>üë®‚Äçüéì 4,000+ Students</div>
<div>üåç Worldwide Access</div>
<div>üîí Secure Payment</div>
</section>

<div class="card">

<h1 class="title">Digital Marketing Course</h1>
<div class="price">NPR 299</div>

<button class="buybtn" onclick="start()">Buy Now</button>


<div id="step1" class="box">

<label class="label">Select Payment Method</label>

<select id="method" onchange="generateQR()">
<option value="">Select Payment</option>
<option value="Khalti">Khalti</option>
<option value="eSewa">eSewa</option>
<option value="Bank">Bank Transfer</option>
</select>

<div id="qrcode"></div>
<p id="paytext" class="paytext"></p>

<input id="email" placeholder="Your Email">
<input id="txn" placeholder="Transaction ID">
<input id="paid" placeholder="Paid Amount">

<button class="submitbtn" onclick="submitPayment()">Submit Payment</button>

</div>


<div id="wait" class="box waitbox">
‚è≥ Waiting Verification...
</div>


<div id="download" class="box successbox">

<h2>‚úî Payment Verified</h2>
<p>Your course is ready</p>

<div class="link">
<a href="https://drive.google.com/">Google Drive</a>
<a href="https://example.com/file.zip">Direct Download</a>
<a href="https://t.me/">Telegram</a>
<a href="mailto:?subject=Digital Marketing Course&body=Download link: https://example.com/file.zip">Send to Email</a>
</div>

</div>
<!-- FEATURES -->
<section class="features">

<h2>What You'll Learn</h2>

<div class="grid">

<div class="boxf">üìà Facebook Ads Mastery</div>
<div class="boxf">üéØ Sales Funnel Blueprint</div>
<div class="boxf">ü§ñ Automation Systems</div>
<div class="boxf">üí∞ Passive Income Strategy</div>
<div class="boxf">üîé SEO Ranking Secrets</div>
<div class="boxf">üìä Analytics Tracking</div>

</div>
</section>


<!-- TESTIMONIALS -->
<section class="testimonials">

<h2>Student Results</h2>

<div class="slider" id="slider">

<div class="slide">‚ÄúI earned my first $500 online in 10 days.‚Äù ‚Äî Rahul</div>
<div class="slide">‚ÄúBest course ever. Clear and practical.‚Äù ‚Äî Sita</div>
<div class="slide">‚ÄúI finally understand ads properly.‚Äù ‚Äî Arjun</div>

</div>
</section>


<!-- GUARANTEE -->
<section class="guarantee">
<h2>30-Day Money Back Guarantee</h2>
<p>If you don't like the course, we refund instantly.</p>
</section>


<!-- SCARCITY BAR -->
<div class="scarcity">
‚ö° 73% Seats Already Claimed
</div>


<!-- LIVE SALES POPUP -->
<div class="popup" id="popup"></div>
  
</div>
</div>

<script>
const BASE = "https://digital-marketing-course.onrender.com";
const FULL_AMOUNT = 299;

function start(){
document.getElementById("step1").style.display="block";
}

function generateQR(){
const method=document.getElementById("method").value;
const qrDiv=document.getElementById("qrcode");
qrDiv.innerHTML="";

if(!method){
document.getElementById("paytext").innerText="";
return;
}

let qrData={};

if(method==="Khalti"){
qrData={"Khalti_ID":"9807648317","name":"Ishul Kawari","amount":FULL_AMOUNT};
}
else if(method==="eSewa"){
qrData={"eSewa_id":"9807648317","name":"Ishul Kawari","amount":FULL_AMOUNT};
}
else{
qrData={
"accountNumber":"0315759479191001",
"accountName":"ISHUL KAWARI",
"bankCode":"BOALNPKA",
"bankCodeCIPS":"2301",
"amount":FULL_AMOUNT
};
}

new QRCode(qrDiv,{text:JSON.stringify(qrData),width:200,height:200});

const text=document.getElementById("paytext");

if(!method){
text.innerText="";
return;
}

text.innerText =
method==="Bank"
? "Scan QR or transfer NPR "+FULL_AMOUNT
: method+" QR ready. Pay NPR "+FULL_AMOUNT;
}

async function submitPayment(){

const email=document.getElementById("email").value;
const txn=document.getElementById("txn").value;
const paidAmount=parseInt(document.getElementById("paid").value);

if(!email||!txn||isNaN(paidAmount))
return alert("Fill all fields");

if(paidAmount!==FULL_AMOUNT)
return alert("Exact payment must be NPR "+FULL_AMOUNT);

try{

const res=await fetch(BASE+"/submit-payment",{
method:"POST",
headers:{'Content-Type':'application/json'},
body:JSON.stringify({
email,
txn,
paidAmount,
method:document.getElementById("method").value
})
});

const data=await res.json();

if(res.ok){
alert(data.message);
document.getElementById("wait").style.display="block";
}
else alert(data.message);

}catch{
alert("Server connection error");
}
}

setInterval(async ()=>{
const txn=document.getElementById("txn").value;
if(!txn) return;

try{
const res=await fetch(BASE+"/check/"+txn);
const data=await res.json();

if(data.verified)
document.getElementById("download").style.display="block";

}catch{}
},5000);
</script>
  
<script>
/* STORE LAST TXN WITHOUT MODIFYING ORIGINAL FUNCTION */
let LAST_TXN = "";

// Hook into button click instead of editing submitPayment()
document.querySelector("button[onclick='submitPayment()']")
.addEventListener("click",()=>{
    LAST_TXN = document.getElementById("txn").value.trim();
});


/* CHECK VERIFICATION USING STORED TXN */
setInterval(async ()=>{
    if(!LAST_TXN) return;

    try{
        const res = await fetch(BASE+"/check/"+LAST_TXN);
        const data = await res.json();

        if(data.verified){

            // show download
            document.getElementById("download").style.display="block";

            // hide waiting box
            document.getElementById("wait").style.display="none";

            // reset form fields
            document.getElementById("email").value="";
            document.getElementById("txn").value="";
            document.getElementById("paid").value="";
            document.getElementById("method").value="";

            // remove QR
            document.getElementById("qrcode").innerHTML="";
            document.getElementById("paytext").innerText="";

            // stop checking
            LAST_TXN="";
        }

    }catch(e){}
},3000);
              </script>
  <script>

// COUNTDOWN TIMER
let time = 600;
setInterval(()=>{
let m=Math.floor(time/60);
let s=time%60;
document.getElementById("countdown").innerText =
"Offer expires in "+m+":"+ (s<10?"0"+s:s);
if(time>0) time--;
},1000);


// STOCK COUNTER
let stock = 17;
setInterval(()=>{
stock--;
if(stock<3) stock=17;
document.getElementById("stock").innerText =
"Only "+stock+" seats left";
},8000);


// TESTIMONIAL SLIDER
let i=0;
setInterval(()=>{
let slides=document.querySelectorAll(".slide");
slides.forEach(s=>s.style.display="none");
slides[i].style.display="block";
i=(i+1)%slides.length;
},3000);


// FAKE SALES POPUP
const names=["Ramesh","Aman","Sita","Raj","Anita","Rahul","Kiran"];

setInterval(()=>{
let name=names[Math.floor(Math.random()*names.length)];
let popup=document.getElementById("popup");
popup.innerText=name+" just purchased";
popup.style.display="block";

setTimeout(()=>popup.style.display="none",3000);

},7000);

  </script>
  
</body>
</html>
